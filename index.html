<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blood Test Analyzer</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="/manifest.json">
</head>
<body>
    <h1>Blood Test Parameter Analyzer</h1>
    
    <form id="bloodTestForm">
        <!-- Form elements here -->
        <button type="button" onclick="analyzeResults()">Analyze</button>
    </form>

    <script>
    function analyzeResults() {
        const parameters = {
            glucose: document.getElementById("glucose").value,
            cholesterol: document.getElementById("cholesterol").value,
            triglycerides: document.getElementById("triglycerides").value,
            hdl: document.getElementById("hdl").value,
            ldl: document.getElementById("ldl").value,
            hemoglobin: document.getElementById("hemoglobin").value,
            whiteBloodCells: document.getElementById("whiteBloodCells").value,
            platelets: document.getElementById("platelets").value,
            creatinine: document.getElementById("creatinine").value,
            bilirubin: document.getElementById("bilirubin").value,
            alkPhos: document.getElementById("alkPhos").value,
            ast: document.getElementById("ast").value,
            alt: document.getElementById("alt").value,
            uricAcid: document.getElementById("uricAcid").value,
            calcium: document.getElementById("calcium").value,
            sodium: document.getElementById("sodium").value,
        };

        let results = "";

        const ranges = {
            glucose: { low: 70, high: 140 },
            cholesterol: { low: 125, high: 200 },
            triglycerides: { low: 0, high: 150 },
            hdl: { low: 40, high: 60 },
            ldl: { low: 0, high: 100 },
            hemoglobin: { low: 13.5, high: 17.5 },
            whiteBloodCells: { low: 4, high: 11 },
            platelets: { low: 150, high: 450 },
            creatinine: { low: 0.6, high: 1.2 },
            bilirubin: { low: 0.1, high: 1.2 },
            alkPhos: { low: 44, high: 147 },
            ast: { low: 10, high: 40 },
            alt: { low: 7, high: 56 },
            uricAcid: { low: 3.5, high: 7.2 },
            calcium: { low: 8.5, high: 10.2 },
            sodium: { low: 135, high: 145 },
        };

        for (const [key, value] of Object.entries(parameters)) {
            if (value.trim() === "") {
                continue; 
            }

            const numericValue = parseFloat(value);
            if (numericValue < ranges[key].low) {
                results += `<span style="color: red;">${key.charAt(0).toUpperCase() + key.slice(1)}: Under range</span><br>`;
            } else if (numericValue > ranges[key].high) {
                results += `<span style="color: red;">${key.charAt(0).toUpperCase() + key.slice(1)}: High range</span><br>`;
            } else {
                results += `<span style="color: green;">${key.charAt(0).toUpperCase() + key.slice(1)}: In range</span><br>`;
            }
        }

        const encodedResults = encodeURIComponent(results);
        window.location.href = `result.html?results=${encodedResults}`;
    }
    </script>

    <script>
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/service-worker.js')
          .then(registration => {
            console.log('Service Worker registered with scope:', registration.scope);
          })
          .catch(error => {
            console.error('Service Worker registration failed:', error);
          });
    }
    </script>

    <footer>
        <p>Â© 2024 Eng. Odeh Al Amrow  </p>
    </footer>
</body>
</html>
